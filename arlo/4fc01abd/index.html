<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"islocal.cc",root:"/",scheme:"Muse",version:"7.8.0",exturl:!1,sidebar:{position:"right",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"default"},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="Ceph 常用命令大全Ceph 是一个开源的分布式存储系统，支持对象存储、块设备（RBD）和文件系统（CephFS）。以下是一份常用命令清单，适用于日常运维、监控和排错。"><meta property="og:type" content="article"><meta property="og:title" content="Ceph常用命令合集"><meta property="og:url" content="http://islocal.cc/arlo/4fc01abd/index.html"><meta property="og:site_name" content="南山草舍"><meta property="og:description" content="Ceph 常用命令大全Ceph 是一个开源的分布式存储系统，支持对象存储、块设备（RBD）和文件系统（CephFS）。以下是一份常用命令清单，适用于日常运维、监控和排错。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2025-12-17T14:54:00.000Z"><meta property="article:modified_time" content="2025-12-17T14:58:56.720Z"><meta property="article:author" content="南山小樵"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://islocal.cc/arlo/4fc01abd/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Ceph常用命令合集 | 南山草舍</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">南山草舍</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">17</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">183</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">104</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://islocal.cc/arlo/4fc01abd/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="南山小樵"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="南山草舍"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Ceph常用命令合集</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-12-17 22:54:00 / 修改时间：22:58:56" itemprop="dateCreated datePublished" datetime="2025-12-17T22:54:00+08:00">2025-12-17</time></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="Ceph-常用命令大全"><a href="#Ceph-常用命令大全" class="headerlink" title="Ceph 常用命令大全"></a>Ceph 常用命令大全</h1><p>Ceph 是一个开源的分布式存储系统，支持对象存储、块设备（RBD）和文件系统（CephFS）。以下是一份常用命令清单，适用于日常运维、监控和排错。</p><span id="more"></span><h2 id="一、集群状态与信息"><a href="#一、集群状态与信息" class="headerlink" title="一、集群状态与信息"></a>一、集群状态与信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 查看集群整体健康状态</span><br><span class="line">ceph -s</span><br><span class="line">ceph status</span><br><span class="line"></span><br><span class="line"># 查看详细集群状态（包括 OSD、MON、MDS 等）</span><br><span class="line">ceph health detail</span><br><span class="line"></span><br><span class="line"># 查看集群使用情况（容量、PG 状态等）</span><br><span class="line">ceph df</span><br><span class="line"></span><br><span class="line"># 查看集群配置（需权限）</span><br><span class="line">ceph config dump</span><br><span class="line"></span><br><span class="line"># 列出所有 Ceph 配置选项（仅查看当前生效值）</span><br><span class="line">ceph config show &lt;daemon_type&gt;.&lt;id&gt;   # 如 ceph config show osd.0</span><br></pre></td></tr></table></figure><h2 id="二、OSD（对象存储守护进程）"><a href="#二、OSD（对象存储守护进程）" class="headerlink" title="二、OSD（对象存储守护进程）"></a>二、OSD（对象存储守护进程）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># 列出所有 OSD 及其状态</span><br><span class="line">ceph osd tree</span><br><span class="line">ceph osd stat</span><br><span class="line">ceph osd dump</span><br><span class="line"></span><br><span class="line"># 查看单个 OSD 信息</span><br><span class="line">ceph osd info osd.&lt;id&gt;</span><br><span class="line"></span><br><span class="line"># 标记 OSD 为 out（不再分配数据）</span><br><span class="line">ceph osd out osd.&lt;id&gt;</span><br><span class="line"></span><br><span class="line"># 标记 OSD 为 in（重新参与数据分配）</span><br><span class="line">ceph osd in osd.&lt;id&gt;</span><br><span class="line"></span><br><span class="line"># 停用/启用 OSD（配合维护）</span><br><span class="line">ceph osd down osd.&lt;id&gt;</span><br><span class="line">ceph osd up osd.&lt;id&gt;        # 实际由服务启停控制，此命令较少用</span><br><span class="line"></span><br><span class="line"># 删除 OSD（需先 out + purge）</span><br><span class="line">ceph osd purge osd.&lt;id&gt; --yes-i-really-mean-it</span><br><span class="line"></span><br><span class="line"># 重命名或替换 OSD（如更换磁盘）</span><br><span class="line">ceph osd crush reweight osd.&lt;id&gt; 0     # 逐步迁移数据</span><br><span class="line">ceph osd crush remove osd.&lt;id&gt;</span><br><span class="line">ceph auth del osd.&lt;id&gt;</span><br><span class="line">ceph osd rm osd.&lt;id&gt;</span><br><span class="line"></span><br><span class="line"># 查看 OSD 使用率（磁盘、权重等）</span><br><span class="line">ceph osd df</span><br><span class="line">ceph osd df tree</span><br></pre></td></tr></table></figure><h2 id="三、Monitor（MON）"><a href="#三、Monitor（MON）" class="headerlink" title="三、Monitor（MON）"></a>三、Monitor（MON）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 查看 MON 状态</span><br><span class="line">ceph mon stat</span><br><span class="line">ceph quorum_status -f json-pretty</span><br><span class="line"></span><br><span class="line"># 列出所有 MON 节点</span><br><span class="line">ceph mon dump</span><br><span class="line"></span><br><span class="line"># 添加 MON（需在目标节点部署后）</span><br><span class="line">ceph mon add &lt;name&gt; &lt;ip&gt;</span><br><span class="line"></span><br><span class="line"># 删除 MON（谨慎操作）</span><br><span class="line">ceph mon remove &lt;name&gt;</span><br></pre></td></tr></table></figure><h2 id="四、MDS（CephFS-元数据服务器）"><a href="#四、MDS（CephFS-元数据服务器）" class="headerlink" title="四、MDS（CephFS 元数据服务器）"></a>四、MDS（CephFS 元数据服务器）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 查看 MDS 状态</span><br><span class="line">ceph mds stat</span><br><span class="line">ceph fs status</span><br><span class="line"></span><br><span class="line"># 列出文件系统</span><br><span class="line">ceph fs ls</span><br><span class="line"></span><br><span class="line"># 创建 CephFS（需至少两个 pool：metadata + data）</span><br><span class="line">ceph fs new &lt;fs_name&gt; &lt;metadata_pool&gt; &lt;data_pool&gt;</span><br><span class="line"></span><br><span class="line"># 删除 CephFS（先停用）</span><br><span class="line">ceph fs fail &lt;fs_name&gt;</span><br><span class="line">ceph fs rm &lt;fs_name&gt; --yes-i-really-mean-it</span><br><span class="line"></span><br><span class="line"># 设置 MDS standby</span><br><span class="line">ceph mds set_allow_standby_replay &lt;fs_name&gt; true</span><br></pre></td></tr></table></figure><h2 id="五、Pool（存储池）管理"><a href="#五、Pool（存储池）管理" class="headerlink" title="五、Pool（存储池）管理"></a>五、Pool（存储池）管理</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 列出所有 pool</span><br><span class="line">ceph osd lspools</span><br><span class="line">ceph df</span><br><span class="line"></span><br><span class="line"># 创建 pool</span><br><span class="line">ceph osd pool create &lt;pool_name&gt; &lt;pg_num&gt; [pgp_num] [replicated|erasure] ...</span><br><span class="line"></span><br><span class="line"># 删除 pool（需先允许删除）</span><br><span class="line">ceph config set mon mon_allow_pool_delete true</span><br><span class="line">ceph osd pool rm &lt;pool_name&gt; &lt;pool_name&gt; --yes-i-really-really-mean-it</span><br><span class="line"></span><br><span class="line"># 设置 pool 参数</span><br><span class="line">ceph osd pool set &lt;pool_name&gt; size 3          # 副本数</span><br><span class="line">ceph osd pool set &lt;pool_name&gt; min_size 2      # 最小可用副本</span><br><span class="line">ceph osd pool set &lt;pool_name&gt; pg_num 128      # 不建议动态调大（需谨慎）</span><br><span class="line"></span><br><span class="line"># 查看 pool 详细信息</span><br><span class="line">rados df</span><br><span class="line">ceph osd pool get &lt;pool_name&gt; all</span><br></pre></td></tr></table></figure><h2 id="六、RBD（块设备）操作"><a href="#六、RBD（块设备）操作" class="headerlink" title="六、RBD（块设备）操作"></a>六、RBD（块设备）操作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 列出 pool 中的 RBD 镜像</span><br><span class="line">rbd ls &lt;pool_name&gt;</span><br><span class="line"></span><br><span class="line"># 创建 RBD 镜像</span><br><span class="line">rbd create &lt;pool_name&gt;/&lt;image_name&gt; --size 10G</span><br><span class="line"></span><br><span class="line"># 映射 RBD 到本地（需内核支持或 rbd-nbd）</span><br><span class="line">rbd map &lt;pool_name&gt;/&lt;image_name&gt;</span><br><span class="line">rbd showmapped</span><br><span class="line"></span><br><span class="line"># 取消映射</span><br><span class="line">rbd unmap &lt;device_path&gt;</span><br><span class="line"></span><br><span class="line"># 查看镜像信息</span><br><span class="line">rbd info &lt;pool_name&gt;/&lt;image_name&gt;</span><br><span class="line"></span><br><span class="line"># 调整大小</span><br><span class="line">rbd resize --size 20G &lt;pool_name&gt;/&lt;image_name&gt;</span><br><span class="line"></span><br><span class="line"># 快照管理</span><br><span class="line">rbd snap create &lt;pool_name&gt;/&lt;image_name&gt;@snap1</span><br><span class="line">rbd snap list &lt;pool_name&gt;/&lt;image_name&gt;</span><br><span class="line">rbd snap rollback &lt;pool_name&gt;/&lt;image_name&gt;@snap1</span><br><span class="line">rbd snap rm &lt;pool_name&gt;/&lt;image_name&gt;@snap1</span><br><span class="line"></span><br><span class="line"># 克隆（需先保护快照）</span><br><span class="line">rbd snap protect &lt;pool_name&gt;/&lt;image_name&gt;@snap1</span><br><span class="line">rbd clone &lt;pool_name&gt;/&lt;image_name&gt;@snap1 &lt;pool_name&gt;/&lt;clone_name&gt;</span><br></pre></td></tr></table></figure><h2 id="七、RADOS-对象操作（底层）"><a href="#七、RADOS-对象操作（底层）" class="headerlink" title="七、RADOS 对象操作（底层）"></a>七、RADOS 对象操作（底层）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 列出 pool 中对象（不推荐大 pool 使用）</span><br><span class="line">rados -p &lt;pool_name&gt; ls</span><br><span class="line"></span><br><span class="line"># 上传/下载对象</span><br><span class="line">rados -p &lt;pool_name&gt; put &lt;obj_name&gt; &lt;local_file&gt;</span><br><span class="line">rados -p &lt;pool_name&gt; get &lt;obj_name&gt; &lt;local_file&gt;</span><br><span class="line"></span><br><span class="line"># 删除对象</span><br><span class="line">rados -p &lt;pool_name&gt; rm &lt;obj_name&gt;</span><br></pre></td></tr></table></figure><h2 id="八、CRUSH-Map-操作"><a href="#八、CRUSH-Map-操作" class="headerlink" title="八、CRUSH Map 操作"></a>八、CRUSH Map 操作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 导出 CRUSH map</span><br><span class="line">ceph osd getcrushmap -o crushmap.bin</span><br><span class="line">crushtool -d crushmap.bin -o crushmap.txt</span><br><span class="line"></span><br><span class="line"># 编辑后编译并应用</span><br><span class="line">crushtool -c crushmap.txt -o newcrushmap.bin</span><br><span class="line">ceph osd setcrushmap -i newcrushmap.bin</span><br><span class="line"></span><br><span class="line"># 查看 CRUSH 规则</span><br><span class="line">ceph osd crush rule ls</span><br><span class="line">ceph osd crush rule dump</span><br></pre></td></tr></table></figure><h2 id="九、日志与调试"><a href="#九、日志与调试" class="headerlink" title="九、日志与调试"></a>九、日志与调试</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 动态调整日志级别（临时）</span><br><span class="line">ceph tell osd.&lt;id&gt; injectargs &#x27;--debug_osd=20&#x27;</span><br><span class="line"></span><br><span class="line"># 查看守护进程日志（取决于部署方式）</span><br><span class="line">journalctl -u ceph-osd@&lt;id&gt;</span><br><span class="line"># 或查看 /var/log/ceph/ 目录</span><br><span class="line"></span><br><span class="line"># 查看 PG 状态（排查卡住的 PG）</span><br><span class="line">ceph pg dump_stuck inactive</span><br><span class="line">ceph pg dump_stuck unclean</span><br><span class="line">ceph pg &lt;pg_id&gt; query</span><br></pre></td></tr></table></figure><h2 id="十、用户与认证（CephX）"><a href="#十、用户与认证（CephX）" class="headerlink" title="十、用户与认证（CephX）"></a>十、用户与认证（CephX）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 列出所有用户</span><br><span class="line">ceph auth list</span><br><span class="line"></span><br><span class="line"># 查看用户密钥</span><br><span class="line">ceph auth get client.admin</span><br><span class="line"></span><br><span class="line"># 创建新用户（带 caps 权限）</span><br><span class="line">ceph auth get-or-create client.user1 mon &#x27;allow r&#x27; osd &#x27;allow rw pool=data&#x27;</span><br><span class="line"></span><br><span class="line"># 导出 keyring</span><br><span class="line">ceph auth get client.user1 -o /etc/ceph/client.user1.keyring</span><br></pre></td></tr></table></figure><h2 id="十一、其他实用命令"><a href="#十一、其他实用命令" class="headerlink" title="十一、其他实用命令"></a>十一、其他实用命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 查看版本</span><br><span class="line">ceph --version</span><br><span class="line"></span><br><span class="line"># 查看网络连接（MON/OSD 通信）</span><br><span class="line">ceph report</span><br><span class="line"></span><br><span class="line"># 手动触发数据均衡（通常自动进行）</span><br><span class="line">ceph osd reweight-by-utilization 110   # 超过 110% 平均利用率的 OSD 降权</span><br><span class="line"></span><br><span class="line"># 清除 full 标记（当集群满时）</span><br><span class="line">ceph osd set-full-ratio 0.95</span><br><span class="line">ceph osd set-backfillfull-ratio 0.90</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/arlo/7bcf7b8b/" rel="prev" title="OpenSSH漏洞通用升级方案"><i class="fa fa-chevron-left"></i> OpenSSH漏洞通用升级方案</a></div><div class="post-nav-item"></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:t}=CONFIG.comments;if(CONFIG.comments.storage&&(t=localStorage.getItem("comments_active")||t),t){let e=document.querySelector(`a[href="#comment-${t}"]`);e&&e.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{if(!t.target.matches(".tabs-comment .tab-content .tab-pane"))return;let e=t.target.classList[1];localStorage.setItem("comments_active",e)})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Ceph-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8"><span class="nav-number">1.</span> <span class="nav-text">Ceph 常用命令大全</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E9%9B%86%E7%BE%A4%E7%8A%B6%E6%80%81%E4%B8%8E%E4%BF%A1%E6%81%AF"><span class="nav-number">1.1.</span> <span class="nav-text">一、集群状态与信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81OSD%EF%BC%88%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%EF%BC%89"><span class="nav-number">1.2.</span> <span class="nav-text">二、OSD（对象存储守护进程）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81Monitor%EF%BC%88MON%EF%BC%89"><span class="nav-number">1.3.</span> <span class="nav-text">三、Monitor（MON）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81MDS%EF%BC%88CephFS-%E5%85%83%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89"><span class="nav-number">1.4.</span> <span class="nav-text">四、MDS（CephFS 元数据服务器）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81Pool%EF%BC%88%E5%AD%98%E5%82%A8%E6%B1%A0%EF%BC%89%E7%AE%A1%E7%90%86"><span class="nav-number">1.5.</span> <span class="nav-text">五、Pool（存储池）管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81RBD%EF%BC%88%E5%9D%97%E8%AE%BE%E5%A4%87%EF%BC%89%E6%93%8D%E4%BD%9C"><span class="nav-number">1.6.</span> <span class="nav-text">六、RBD（块设备）操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81RADOS-%E5%AF%B9%E8%B1%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E5%BA%95%E5%B1%82%EF%BC%89"><span class="nav-number">1.7.</span> <span class="nav-text">七、RADOS 对象操作（底层）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81CRUSH-Map-%E6%93%8D%E4%BD%9C"><span class="nav-number">1.8.</span> <span class="nav-text">八、CRUSH Map 操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81%E6%97%A5%E5%BF%97%E4%B8%8E%E8%B0%83%E8%AF%95"><span class="nav-number">1.9.</span> <span class="nav-text">九、日志与调试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E7%94%A8%E6%88%B7%E4%B8%8E%E8%AE%A4%E8%AF%81%EF%BC%88CephX%EF%BC%89"><span class="nav-number">1.10.</span> <span class="nav-text">十、用户与认证（CephX）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%85%B6%E4%BB%96%E5%AE%9E%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">1.11.</span> <span class="nav-text">十一、其他实用命令</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="南山小樵" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">南山小樵</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">183</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">17</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">104</span> <span class="site-state-item-name">标签</span></a></div></nav></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">南山小樵</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script></body></html>